!function(i,Z){"use strict";var I="ht",R=i[I],M="position",z="absolute",X="px",L="left",F="top",f="innerHTML",n="className",g="width",t="height",b="0",r="display",G="none",d="visibility",N="user-select",Y="margin",p="padding",O=null,q=R.Color,E=R.Default,c=E.getInternal(),_=i.setTimeout,o=i.setInterval,P=i.clearTimeout,T=i.clearInterval,v=i.parseInt,D=E.isLeftButton,B=E.isDragging,H=E.startDragging,S=E.getDistance,u=E.isTouchable,a=q.widgetIconHighlight,s=q.widgetIconBorder,k=q.widgetIconGradient,y=function(){return document},e=function(a,o){return a.querySelectorAll(o)},$=function(k){var f=y().createElement(k);return"ul"===k&&(W(f,M,"relative"),W(f,Y,b),W(f,p,b),W(f,"list-style",G),W(f,"box-sizing","border-box"),W(f,"-moz-box-sizing","border-box"),W(f,r,"inline-block"),W(f,"vertical-align","text-bottom"),W(f,"border","1px solid "+E.contextMenuBorderColor),W(f,"box-shadow","0 0 16px 1px "+E.contextMenuShadowColor),W(f,"overflow","hidden"),E.contextMenuBorderRadius&&W(f,"border-radius",E.contextMenuBorderRadius+X)),f},K=function(z){var Z=z.touches[0];return Z?Z:z.changedTouches[0]},C=function(){return $("div")},A=function(){return $("canvas")},W=function(J,Z,M){J.style.setProperty(Z,M,O)},l=function(N,i,p){E.def(R.widget[N],i,p)},U=function(w,V){w.appendChild(V)},j=function(f,g){f.removeChild(g)},V=function(i,C,A,Q){i.addEventListener(C,A,!!Q)},m=function(y,b,K,c){y.removeEventListener(b,K,!!c)};c.addMethod(E,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:s},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:a}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:s},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:a,gradient:E.imageGradient,gradientColor:k,background:a}]},contextMenuLabelFont:(u?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var J=function(h){var O=this,Q=h._view;if(O.$11b=h,O.addListeners(),V(Q,"contextmenu",function(K){K.preventDefault()}),!u){var f=O.$37b=O.$36b.bind(O);V(Q,"mouseover",f),V(Q,"mouseout",f)}};E.def(J,Z,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(F){if(E.preventDefault(F),D(F)){for(var m=this,O=m.$11b,x=m.getView(),r=x.children,N=0;N<r.length;N++){var v=r[N],W=v.$24b,h=v.$25b;if(W&&W.contains(F.target))return O.scrollUp(v),m.$28b=_(function(){m.$29b=o(function(){O.scrollUp(v)},100)},500),H(m,F),void 0;if(h&&h.contains(F.target))return O.scrollDown(v),m.$28b=_(function(){m.$29b=o(function(){O.scrollDown(v)},100)},500),H(m,F),void 0}u&&(F=K(F)),m.$30b={x:F.pageX,y:F.pageY}}},handle_mousedown:function(m){this.handle_touchstart(m)},handle_touchend:function(U){if(D(U)){var w=this,I=w.$30b,y=u?{x:K(U).pageX,y:K(U).pageY}:{x:U.pageX,y:U.pageY};if(!I||S(I,y)>1)return delete w.$30b,void 0;for(var J=w.getView(),R=w.$11b,T=U.target,P=O,V=O,N=R._items,i=J.$26b,n=0;n<i.length;n++)if(V=i[n],V.contains(T)){P=V.getAttribute("data-id");break}if(P&&N){var p=R.$17b(N,function(c){return c._id===P});if(p){var Y=!1;p.disabled instanceof Function?Y=p.disabled.call(R,p):p.disabled===!0&&(Y=!0),Y||(p.items?u&&w.$36b(V,!0):R.$1b(p,U))}}delete w.$30b}},$36b:function(f,Z){if(!B()){var S,g=this,l=g.$11b,R=g.getView(),J=l.$20b||R.children[0],k=l.$19b,V=R.$26b,y=R.children,b=f.target,D=R.getBoundingClientRect(),o=E.getWindowInfo(),$=o.width,s=o.height,i=function(j){for(var L=0;L<y.length;L++){var l=y[L],W=new RegExp(j+"$"),p=l[n];if(p&&(W.test(p)||p.indexOf(j+" ")>=0))return l}},m=function(Y){for(var O=0;O<V.length;O++){var P=V[O],$=new RegExp(Y+"$"),X=P[n];if(X&&($.test(X)||X.indexOf(Y+" ")>=0))return P}},r=function(g){var x=m("menu-item"+g.$45b),b=x.getBoundingClientRect(),h=b.top-D.top,r=b.left-D.left;W(g,F,h+X),W(g,L,r+b.width+X);var E=g.getBoundingClientRect(),k=E.top,o=E.left,e=E.height,v=E.width,T=k+e+2,j=o+v+2;T>s&&W(g,F,h+s-T+X),j>$&&W(g,L,r-v+X)};if(Z)S=f;else{if("mouseover"===f.type){for(var w=0;w<V.length;w++){var h=V[w];if(h.contains(b)){S=h;break}}if(!S&&k){var O=k.parentNode,T=i("submenu"+k.getAttribute("data-id"));(T&&T.contains(b)||O&&O.contains(b))&&(S=k)}}else if("mouseout"===f.type){for(var N=!1,U=f.relatedTarget,w=0;w<y.length;w++){var M=y[w];if("hidden"!==M.style.visibility&&M.contains(U)){N=!0;break}}if(N)return}!S&&J&&(S=m("menu-item"+(J.$45b||"NaN")))}if(S!=k){if(k)for(var v=k;v;){if(v[n]=v[n].replace(" menu-item-hover",""),v[n].indexOf("disabled")<0){var G=l.getItemByProperty("_id",v.getAttribute("data-id"));null!=G.background?G.background instanceof Function?W(v,"background-color",G.background.call(l,G)):W(v,"background-color",G.background):W(v,"background-color",E.contextMenuBackground),W(v,"color",E.contextMenuLabelColor)}var u=i("submenu"+v.getAttribute("data-id"));u&&W(u,d,"hidden");var q=v.parentNode;v=m("menu-item"+(q.$45b||"NaN"))}if(S){for(var z=S,_=[];z;){z[n]+=" menu-item-hover",z[n].indexOf("disabled")<0&&(W(z,"background-color",E.contextMenuHoverBackground),W(z,"color",E.contextMenuHoverLabelColor));var t=i("submenu"+z.getAttribute("data-id"));t&&(W(t,d,"visible"),_.push(t));var q=z.parentNode;z=m("menu-item"+(q.$45b||"NaN"))}_.reverse(),_.forEach(function(_){r(_)})}}l.$19b=S,l.$20b=S?S.parentNode:R.children[0]}},handle_mouseup:function(N){this.handle_touchend(N)},handleWindowTouchEnd:function(){var m=this;m.$28b!=O&&(P(m.$28b),delete m.$28b),m.$29b!=O&&(T(m.$29b),delete m.$29b),delete m.$34b,delete m.$30b,delete m.$35b},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handle_mousemove:function(c){this.handle_touchmove(c)},handle_touchmove:function(p){if(!B()&&D(p)){for(var d=this,i=d.getView().children,E=O,F=0;F<i.length;F++){var $=i[F];if($.contains(p.target)){E=$;break}}var k=d.$30b,f=u?{x:K(p).pageX,y:K(p).pageY}:{x:p.pageX,y:p.pageY};E&&k&&S(k,f)>2&&(H(d,p),d.$34b=E,d.$35b=E.$18b)}},handleWindowTouchMove:function(n){n.preventDefault();var b=this,s=b.$11b,g=b.$34b,E=b.$35b,D=b.$30b;if(D&&g){var w=u?{x:K(n).pageX,y:K(n).pageY}:{x:n.pageX,y:n.pageY},I=w.y-D.y;I>0?s.scrollUp(g,g.$18b-(E-I)):s.scrollDown(g,E-I-g.$18b)}},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},$10b:function(u,k){u.preventDefault();for(var F=this,d=F.getView().children,g=O,N=0;N<d.length;N++){var L=d[N];if(L.contains(u.target)){g=L;break}}if(g){var V=this.$11b,E=V.getRowHeight();Math.abs(k)>.05&&(k>0?V.scrollUp(g,k*E):0>k&&V.scrollDown(g,-k*E))}},handle_mousewheel:function(E){this.$10b(E,E.wheelDelta/40)},handle_DOMMouseScroll:function(Y){this.$10b(Y,-Y.detail)},$44b:function(T){this.getView().contains(T.target)||this.$11b.hide()},$41b:function(a){this.$11b.show(a)},$4b:function(G,e){var K=this.$11b;if(e=e||K._items,e&&e.length&&G.keyCode){var J=[G.keyCode];G.shiftKey&&J.push(16),G.ctrlKey&&J.push(17),G.altKey&&J.push(18),/mac/.test(i.navigator?i.navigator.userAgent.toLowerCase():"")?G.metaKey&&J.push(17):G.metaKey&&J.push(91),J.sort();var u=J.join(),C=K.$17b(e,function(z){if(z.key){var C=z.key.slice(0);return C.sort(),u===C.join()}});if(C){C.preventDefault!==!1&&G.preventDefault();var t=!1;C.disabled instanceof Function?t=C.disabled.call(K,C):C.disabled===!0&&(t=!0),t||K.$1b(C,G)}}},$39b:function(T){var k=this,l=K(T);k.$32b={x:l.pageX,y:l.pageY}},$38b:function(B){var C=this,W=K(B);C.$31b={x:W.pageX,y:W.pageY},C.$33b=_(function(){C.$31b&&(C.$32b?S(C.$31b,C.$32b)<10&&C.$11b.show(B):C.$11b.show(B)),delete C.$33b,delete C.$31b,delete C.$32b},600)},$40b:function(){var v=this;v.$33b!=O&&(P(v.$33b),delete v.$33b,delete v.$31b,delete v.$32b)}}),R.widget.ContextMenu=function(B){var P=this,m=P._view=c.createView(null,P);m[n]="ht-widget-contextmenu",P.setItems(B),P.$13b=new J(P),W(m,"font",E.contextMenuLabelFont),W(m,M,z),W(m,"cursor","default"),W(m,"-webkit-"+N,G),W(m,"-moz-"+N,G),W(m,"-ms-"+N,G),W(m,N,G),W(m,"box-sizing","border-box"),W(m,"-moz-box-sizing","border-box"),E.baseZIndex!=O&&W(m,"z-index",v(E.baseZIndex)+2+""),P.$3b=function(w){P.$13b.$4b(w)}},l("ContextMenu",Z,{$5b:0,_items:O,$21b:O,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var I=this,U=I._enableGlobalKey;U===!1&&(V(y(),"keydown",I.$3b),I._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,m(y(),"keydown",this.$3b)},setItems:function(m){this._items=m},getItems:function(){return this._items},setVisibleFunc:function(F){this.$16b=F},setLabelMaxWidth:function(j){this.$43b=j},$1b:function(F,H){var I=this;if("check"===F.type)F.selected=!F.selected;else if("radio"===F.type){var t=F.groupId;I.$17b(I._items,function(U){U.groupId===t&&(U.selected=!1)}),F.selected=!0}if(I.hide(),F.action)F.action.apply(F.scope||I,[F,H]);else if(F.href){var q=F.linkTarget||"_self";i.open(F.href,q)}},getItemById:function(b){return this.getItemByProperty("id",b)},setItemVisible:function(g,A){var G=this.getItemById(g);G&&(G.visible=A)},getItemByProperty:function(d,a,$){var R=this;if($=$||R._items,!$||0===$.length)return O;var H=R.$17b($,function(c){return c[d]===a});return H||O},scrollUp:function(l,T){var J=this;if(T=T==O?20:T,T=v(T),0!==T){var c=0;l.$18b>T&&(c=l.$18b-T),J.$42b(l,c),l.scrollTop=c,l.$18b=c}},scrollDown:function(p,M){var T=this;if(M=M==O?20:M,M=v(M),0!==M){var t=p.$22b,j=p.$23b,R=t-j;j+p.$18b+M<t&&(R=p.$18b+M),T.$42b(p,R),p.scrollTop=R,p.$18b=R}},$42b:function(s,t){t=t==O?s.$18b:t;var J=s.$24b,z=s.$25b;J&&(W(J,"top",t+X),0==t?W(J,r,G):W(J,r,"block")),z&&(W(z,"bottom",-t+X),t==s.$22b-s.$23b?W(z,r,G):W(z,r,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(K,u){for(var v=0;v<K.length;v++){var Y=K[v];if(u(Y))return Y;if(Y.items){var q=this.$17b(Y.items,u);if(q)return q}}},$2b:function(B,G){for(var q=this,b=0;b<B.length;b++){q.$5b++;var y=B[b];if(y.visible!==!1&&!(E.isFunction(y.visible)&&y.visible()===!1||q.$16b&&!q.$16b.call(q,y))){var F=$("li"),o=q.$5b+"";if(W(F,"white-space","nowrap"),W(F,r,"block"),"separator"===y||y.separator===!0){var c=C();c[n]="separator",W(c,t,E.contextMenuSeparatorWidth+X),W(c,"background",E.contextMenuSeparatorColor),U(F,c)}else{y._id=o,F.setAttribute("data-id",o);var S=$("span"),V=$("span"),m=A(),H=C();if(W(S,r,"inline-block"),W(S,t,"1.2em"),W(V,r,"inline-block"),W(V,t,"1.2em"),W(V,"line-height","1.2em"),m[n]="prefix",W(m,r,"inline-block"),W(m,g,"1em"),W(m,t,"1em"),W(m,"vertical-align","middle"),W(m,Y,"0 0.2em"),"check"===y.type&&y.selected?m[n]+=" check-prefix":"radio"===y.type&&y.selected&&(m[n]+=" radio-prefix"),U(F,m),y.icon){var a=A();a[n]="contextmenu-item-icon",W(a,r,"inline-block"),W(a,t,"1.2em"),W(a,g,"1.2em"),W(a,"margin-right","0.2em"),W(a,"float","left"),a.$50b=y.icon,a._item=y,U(S,a)}if(V[f]=y.label,U(S,V),U(F,S),H[n]="suffix",W(H,r,"inline-block"),W(H,"margin-left","1em"),W(H,"margin-right","0.4em"),W(H,"text-align","right"),W(H,"font-size","75%"),y.items&&(H[f]=E.contextMenuSubmenuMark),y.suffix&&(H[f]=y.suffix),U(F,H),F[n]="menu-item menu-item"+o,null!=y.background?y.background instanceof Function?W(F,"background-color",y.background.call(q,y)):W(F,"background-color",y.background):W(F,"background-color",E.contextMenuBackground),W(F,"color",E.contextMenuLabelColor),W(F,p,"3px 0"),y.disabled instanceof Function){var u=y.disabled.call(q,y);u&&(F[n]+=" disabled",W(F,"color",E.contextMenuDisabledLabelColor))}else y.disabled&&(F[n]+=" disabled",W(F,"color",E.contextMenuDisabledLabelColor));if(y.items){q.$21b||(q.$21b=new R.List);var N=$("ul");N[n]="submenu"+o,N.$45b=o,W(N,d,"hidden"),W(N,M,z),U(q._view,N),q.$21b.add(N),q.$2b(y.items,N)}}U(G,F)}}},rebuild:function(){var g=this,B=g._items,Z=g._view;if(Z&&(Z[f]="",g.$21b=O,g.$5b=0,g.$19b=O,g.$20b=O,Z.$26b=O,B&&0!==B.length)){var Y=$("ul",g._r);U(Z,Y),g.$2b(B,Y)}},addTo:function(d){if(d){var X=this,o=X.$13b;if(X.$12b=d,X.$9b=function(f){o.$44b(f)},X.$27b=function(B){o.$41b(B)},u){var Z=X.$6b=function(P){o.$38b(P)},z=X.$7b=function(e){o.$39b(e)},I=X.$8b=function(i){o.$40b(i)};V(d,"touchstart",Z,!0),V(d,"touchmove",z),V(d,"touchend",I)}else V(d,"contextmenu",X.$27b)}},showOnView:function(O,g,t){O=O.getView?O.getView():O;var L=E.getWindowInfo(),S=O.getBoundingClientRect();this.show(S.left+L.left+g,S.top+L.top+t)},show:function(w,_,Z){var H=this,Z=Z==O?!0:!1,G=H._view;if(G){if(H.invalidate(),1===arguments.length){var l=w;if(u){var v=K(l);w=v.pageX,_=v.pageY}else w=l.pageX,_=l.pageY}var d=E.getWindowInfo(),t=d.width,j=d.height,h=d.left,B=d.top,I={pageX:w,pageY:_,clientX:w-h,clientY:_-B,target:1,originEvent:l},Y=I.clientX,T=I.clientY,J=function(P){P.style.height=j-6+X;var $=C(),e=C(),F=function(c){W(c,M,z),W(c,"text-align","center"),W(c,g,"100%"),W(c,"font-size",10+X),W(c,"padding","2px 0"),W(c,"border","0px solid "+E.contextMenuScrollerBorderColor),W(c,"background-color",E.contextMenuScrollerColor1),c.style.backgroundImage="-webkit-linear-gradient(top, "+E.contextMenuScrollerColor1+", "+E.contextMenuScrollerColor2+")",c.style.backgroundImage="linear-gradient(to bottom, "+E.contextMenuScrollerColor1+", "+E.contextMenuScrollerColor2+")"};$[n]="menu-arrow-item menu-arrow-item-top",e[n]="menu-arrow-item menu-arrow-item-bottom",F($),W($,"top",b),W($,"left",b),W($,"border-bottom-width",1+X),$[f]="▲",F(e),W(e,"bottom",b),W(e,"left",b),W(e,"border-top-width",1+X),e[f]="▼",P.$24b=$,P.$25b=e,P.$18b=P.scrollTop,P.$22b=P.scrollHeight,P.$23b=P.clientHeight,U(P,$),U(P,e),H.$42b(P)};H.beforeShow&&H.beforeShow(I);var A=H._items;if(A&&(l&&l.preventDefault(),A.length)){H.rebuild(),E.appendToScreen(G),G.$26b=e(G,".menu-item");var S=G.children[0];S.offsetHeight>j&&J(S);var P=T+(Z?1:0),D=Y+(Z?1:0),a=function(l){for(var I=0,O=0,d=0,E=H.$43b;d<l.children.length;d++){var b=l.children[d];if(b.getAttribute("data-id")){var e=b.children[1],j=b.children[2],q=e.children;if(E){var t=q[0];q.length>1&&(t=q[1]),t.offsetWidth>E&&(t[f]="<marquee scrollamount='3'>"+t[f]+"</marquee>",t.children[0].style.verticalAlign="text-bottom",W(t,g,E+X),W(t,r,"inline-block"))}var p=e.offsetWidth,F=j.offsetWidth;p>I&&(I=p),F>O&&(O=F)}}for(d=0;d<l.children.length;d++){var b=l.children[d];if(b.getAttribute("data-id")){var e=b.children[1],j=b.children[2],R=e.children[0],h=e.children[1];!h&&R.style.width&&W(R,g,I+X),W(e,g,I+X),W(j,g,O+X)}}};a(S);var o=T+3+G.offsetHeight,k=Y+3+G.offsetWidth;o>j?W(G,F,P-(o-j)+B+X):W(G,F,P+B+X),k>t?W(G,L,D-(k-t)+h+X):W(G,L,D+h+X);var m=H.$21b;m&&m.each(function(D){a(D),D.offsetHeight>j&&J(D)}),H.$9b&&V(y(),u?"touchstart":"mousedown",H.$9b,!0),H.afterShow&&H.afterShow(I),H.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=O:!1},getRelatedView:function(){return this.$12b},hide:function(){var _=this,v=_._view;v&&v.parentNode&&(j(v.parentNode,v),m(y(),u?"touchstart":"mousedown",_.$9b,!0),_.afterHide&&_.afterHide())},dispose:function(){var Q=this,s=Q.$12b,x=Q._view;x&&(x.parentNode&&j(x.parentNode,x),Q.disableGlobalKey(),s&&(u?(m(s,"touchstart",Q.$6b,!0),m(s,"touchmove",Q.$7b),m(s,"touchend",Q.$8b)):m(s,"contextmenu",Q.$27b)),Q._view=Q._items=Q.$21b=Q.$19b=Q.$12b=Q.beforeShow=Q.afterShow=Q.afterHide=Q.$9b=Q.$3b=Q.$6b=Q.$7b=Q.$8b=Q.$27b=O)},$46b:function(D,l,O,f,v){var V=c.initContext(D);c.translateAndScale(V,0,0,1),V.clearRect(0,0,O,f),E.drawStretchImage(V,E.getImage(l),"fill",0,0,O,f,v,this),V.restore()},$47b:function(){var R,U,F,j=this,h=j._view;if(j.isShowing()){var O=e(h,".check-prefix");for(F=0;F<O.length;F++){var C=O[F];R=C.clientWidth,U=C.clientHeight,C.$48b=R,C.$49b=U,c.setCanvas(C,R,U)}var t=e(h,".radio-prefix");for(F=0;F<t.length;F++){var H=t[F];R=H.clientWidth,U=H.clientHeight,H.$48b=R,H.$49b=U,c.setCanvas(H,R,U)}var i=e(h,".contextmenu-item-icon");for(F=0;F<i.length;F++){var m=i[F];R=m.clientWidth,U=m.clientHeight,m.$48b=R,m.$49b=U,c.setCanvas(m,R,U)}}},validateImpl:function(){var I,g,O,Q=this,r=Q._view;if(Q.isShowing()){var J=e(r,".check-prefix");for(O=0;O<J.length;O++){var L=J[O];I=L.$48b,g=L.$49b,I&&g&&Q.$46b(L,E.contextMenuCheckIcon,I,g)}var k=e(r,".radio-prefix");for(O=0;O<k.length;O++){var z=k[O];I=z.$48b,g=z.$49b,I&&g&&Q.$46b(z,E.contextMenuRadioIcon,I,g)}var u=e(r,".contextmenu-item-icon");for(O=0;O<u.length;O++){var x=u[O];I=x.$48b,g=x.$49b,I&&g&&Q.$46b(x,E.getImage(x.$50b),I,g,x._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);